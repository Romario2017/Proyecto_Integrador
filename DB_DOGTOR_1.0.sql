CREATE DATABASE IF NOT EXISTS `PI_DOGTOR`;
USE `PI_DOGTOR`;

CREATE TABLE TB_USUARIO (
	CODIGO_USUARIO INT NOT NULL AUTO_INCREMENT,
    EMAIL_USUARIO VARCHAR(255) NOT NULL UNIQUE,
    CONTRASENA_USUARIO VARCHAR(255) NOT NULL,
    NOMBRE_USUARIO VARCHAR(50) NOT NULL,
    APELLIDO_USUARIO VARCHAR(50) NOT NULL,
    GENERO_USUARIO VARCHAR(50) DEFAULT NULL,
    DNI_USUARIO VARCHAR(8) DEFAULT NULL,
    DIRECCION_USUARIO VARCHAR(255) DEFAULT NULL,
    TELEFONO_USUARIO VARCHAR(25) DEFAULT NULL,
    PRIMARY KEY (CODIGO_USUARIO)
);

CREATE TABLE TB_ROL_USUARIO (
	CODIGO_ROL_USUARIO INT NOT NULL AUTO_INCREMENT,
    NOMBRE_ROL_USUARIO VARCHAR(50) NOT NULL,
    PRIMARY KEY (CODIGO_ROL_USUARIO)
);

CREATE TABLE TB_DETALLE_USUARIO_ROL (
	CODIGO_USUARIO INT NOT NULL,
    CODIGO_ROL INT NOT NULL,
    PRIMARY KEY (CODIGO_USUARIO, CODIGO_ROL),
    CONSTRAINT `TB_DETALLE_USUARIO_ROL_FK_TB_USUARIO` FOREIGN KEY (CODIGO_USUARIO) REFERENCES TB_USUARIO (CODIGO_USUARIO),
    CONSTRAINT `TB_DETALLE_USUARIO_ROL_FK_TB_ROL` FOREIGN KEY (CODIGO_ROL) REFERENCES TB_ROL (CODIGO_ROL)
);

CREATE TABLE TB_ENLACE (
	CODIGO_ENLACE INT AUTO_INCREMENT NOT NULL,
    DESCRIPCION_ENLACE VARCHAR(50) NOT NULL,
    RUTA_ENLACE VARCHAR(255) NOT NULL,
    PRIMARY KEY (CODIGO_ENLACE)
);

CREATE TABLE TB_DETALLE_ROL_ENLACE (
	CODIGO_ROL INT NOT NULL,
    CODIGO_ENLACE INT NOT NULL,
    PRIMARY KEY (CODIGO_ROL, CODIGO_ENLACE),
    CONSTRAINT `TB_DETALLE_ROL_ENLACE_FK_TB_ROL` FOREIGN KEY (CODIGO_ROL) REFERENCES TB_ROL (CODIGO_ROL),
    CONSTRAINT `TB_DETALLE_ROL_ENLACE_FK_TB_ENLACE` FOREIGN KEY (CODIGO_ENLACE) REFERENCES TB_ENLACE (CODIGO_ENLACE)
);

CREATE TABLE TB_RAZA_MASCOTA (
	CODIGO_RAZA_MASCOTA INT AUTO_INCREMENT NOT NULL,
    NOMBRE_RAZA_MASCOTA VARCHAR(100),
    PRIMARY KEY (CODIGO_RAZA_MASCOTA)
);

CREATE TABLE TB_ESPECIE_MASCOTA (
	CODIGO_ESPECIE_MASCOTA INT AUTO_INCREMENT NOT NULL,
    NOMBRE_ESPECIE_MASCOTA VARCHAR(100),
    PRIMARY KEY (CODIGO_ESPECIE_MASCOTA)
);

CREATE TABLE TB_SEXO_MASCOTA (
	CODIGO_SEXO_MASCOTA INT AUTO_INCREMENT NOT NULL,
    NOMBRE_SEXO_MASCOTA VARCHAR(100),
    PRIMARY KEY (CODIGO_SEXO_MASCOTA)
);

CREATE TABLE TB_COLOR_MASCOTA (
	CODIGO_COLOR_MASCOTA INT AUTO_INCREMENT NOT NULL,
    NOMBRE_COLOR_MASCOTA VARCHAR(100),
    PRIMARY KEY (CODIGO_COLOR_MASCOTA)
);

CREATE TABLE TB_MASCOTA (
	CODIGO_MASCOTA INT AUTO_INCREMENT NOT NULL,
    CODIGO_USUARIO INT NOT NULL,
    NOMBRE_MASCOTA VARCHAR(100),
    CODIGO_RAZA_MASCOTA INT NOT NULL,
    CODIGO_SEXO_MASCOTA INT NOT NULL,
    CODIGO_ESPECIE_MASCOTA INT NOT NULL,
    CODIGO_COLOR_MASCOTA INT NOT NULL,
    FECHA_NACIMIENTO_MASCOTA DATE DEFAULT NULL,
    CODIGO_IDENTIFICACION_MASCOTA VARCHAR(50) DEFAULT NULL,
    CODIGO_CARTILLA_SANITARIA VARCHAR(50) DEFAULT NULL,
    PRIMARY KEY (CODIGO_MASCOTA),
    CONSTRAINT `TB_MASCOTA_FK_TB_USUARIO` FOREIGN KEY (CODIGO_USUARIO) REFERENCES TB_USUARIO (CODIGO_USUARIO),
    CONSTRAINT `TB_MASCOTA_FK_TB_RAZA_MASCOTA` FOREIGN KEY (CODIGO_RAZA_MASCOTA) REFERENCES TB_RAZA_MASCOTA (CODIGO_RAZA_MASCOTA),
    CONSTRAINT `TB_MASCOTA_FK_TB_SEXO_MASCOTA` FOREIGN KEY (CODIGO_SEXO_MASCOTA) REFERENCES TB_SEXO_MASCOTA (CODIGO_SEXO_MASCOTA),
    CONSTRAINT `TB_MASCOTA_FK_TB_ESPECIE_MASCOTA` FOREIGN KEY (CODIGO_ESPECIE_MASCOTA) REFERENCES TB_ESPECIE_MASCOTA (CODIGO_ESPECIE_MASCOTA),
    CONSTRAINT `TB_MASCOTA_FK_TB_COLOR_MASCOTA` FOREIGN KEY (CODIGO_COLOR_MASCOTA) REFERENCES TB_COLOR_MASCOTA (CODIGO_COLOR_MASCOTA)
);

CREATE TABLE TB_MARCA (
	CODIGO_MARCA INT NOT NULL AUTO_INCREMENT,
    NOMBRE_MARCA VARCHAR(255) NOT NULL,
    PRIMARY KEY (CODIGO_MARCA)
);

CREATE TABLE TB_PROVEEDOR (
	CODIGO_PROVEEDOR INT NOT NULL AUTO_INCREMENT,
    NOMBRE_PROVEEDOR VARCHAR(255) NOT NULL,
    PRIMARY KEY (CODIGO_PROVEEDOR)
);

CREATE TABLE TB_CATEGORIA_PRODUCTO (
	CODIGO_CATEGORIA_PRODUCTO INT NOT NULL AUTO_INCREMENT,
    NOMBRE_CATEGORIA_PRODUCTO VARCHAR(255) NOT NULL,
    PRIMARY KEY (CODIGO_CATEGORIA_PRODUCTO)
);

CREATE TABLE TB_PRODUCTO (
	CODIGO_PRODUCTO INT NOT NULL AUTO_INCREMENT,
    NOMBRE_PRODUCTO VARCHAR(255) NOT NULL,
    DESCRIPCION_SIMPLE_PRODUCTO TEXT NOT NULL,
    DESCRIPCION_HTML_PRODUCTO TEXT DEFAULT NULL,
    PRECIO_PRODUCTO DOUBLE NOT NULL,
    STOCK_PRODUCTO INT NOT NULL,
    SERIE_PRODUCTO VARCHAR(50) NOT NULL,
    FOTO1_PRODUCTO TEXT NOT NULL,
    FOTO2_PRODUCTO TEXT DEFAULT NULL,
    FOTO3_PRODUCTO TEXT DEFAULT NULL,
    CODIGO_MARCA INT NOT NULL,
    CODIGO_CATEGORIA INT NOT NULL,
    CODIGO_PROVEEDOR INT NOT NULL,
    PRIMARY KEY (CODIGO_PRODUCTO),
    CONSTRAINT `TB_PRODUCTO_FK_TB_MARCA` FOREIGN KEY (CODIGO_MARCA) REFERENCES TB_MARCA (CODIGO_MARCA),
    CONSTRAINT `TB_PRODUCTO_FK_TB_CATEGORIA_PRODUCTO` FOREIGN KEY (CODIGO_CATEGORIA_PRODUCTO) REFERENCES TB_CATEGORIA_PRODUCTO (CODIGO_CATEGORIA_PRODUCTO),
    CONSTRAINT `TB_PRODUCTO_FK_TB_PROVEEDOR` FOREIGN KEY (CODIGO_PROVEEDOR) REFERENCES TB_PROVEEDOR (CODIGO_PROVEEDOR)
);

CREATE TABLE TB_SERVICIO (
	CODIGO_SERVICIO INT NOT NULL AUTO_INCREMENT,
    NOMBRE_SERVICIO VARCHAR(255) NOT NULL,
    DESCRIPCION_SERVICIO TEXT NOT NULL,
    PRECIO_SERVICIO DOUBLE NOT NULL,
    HORARIO_SERVICIO TEXT NOT NULL,
    FECHAS_SERVICIO TEXT DEFAULT NULL,
    LIMITE_CITAS_SERVICIO INT NOT NULL,
    PRIMARY KEY (CODIGO_SERVICIO)
);

